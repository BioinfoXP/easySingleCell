% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/3.scRNA-Viz.R
\name{scVisCellRatio}
\alias{scVisCellRatio}
\title{scVis: Cell Ratio Alluvial Plot}
\usage{
scVisCellRatio(
  sce,
  group_col,
  celltype_col,
  group_order = NULL,
  palette = NULL,
  legend_position = "right",
  alpha_flow = 0.5,
  bar_width = 0.5,
  base_size = 14
)
}
\arguments{
\item{sce}{A Seurat object.}

\item{group_col}{String. Column name in \code{meta.data} for X-axis grouping (e.g., "Condition", "Timepoint").}

\item{celltype_col}{String. Column name in \code{meta.data} for cell types (used for stacking and coloring).}

\item{group_order}{Vector. Explicit order for the X-axis groups. Crucial for determining the flow direction.}

\item{palette}{Vector. Custom colors. If NULL, uses the extended 15-color vibrant palette.}

\item{legend_position}{String. Position of the legend ("right", "bottom", "top", "left", "none"). Default "right".}

\item{alpha_flow}{Numeric. Transparency of the connecting flow bands (0-1). Default 0.5.}

\item{bar_width}{Numeric. Width of the vertical bars (0-1). Default 0.5.}

\item{base_size}{Numeric. Base font size for the theme. Default 14.}
}
\value{
A ggplot object.
}
\description{
Visualizes cell type proportion dynamics across groups using an alluvial (Sankey-like) plot.
Features a vibrant, high-contrast 15-color palette and adjustable layout options.
Uses base R pipe (R >= 4.1.0).
}
\examples{
\dontrun{
  library(Seurat)
  library(ggplot2)

  # --- 1. Generate Mock Data ---
  set.seed(123)
  n_cells <- 1000
  counts <- matrix(rpois(n_cells * 10, lambda = 1), nrow = 10, ncol = n_cells)
  colnames(counts) <- paste0("Cell_", 1:n_cells)
  rownames(counts) <- paste0("Gene_", 1:10)

  sce <- CreateSeuratObject(counts = counts)
  sce$Stage <- sample(c("NC", "MASH", "HCC-N", "HCC-T"), n_cells, replace = TRUE)
  sce$CellType <- sample(paste0("Cluster_", 1:8), n_cells, replace = TRUE)

  # --- 2. Run Function ---
  # Example: Legend at the bottom
  p <- scVisCellRatio(
    sce = sce,
    group_col = "Stage",
    celltype_col = "CellType",
    group_order = c("NC", "MASH", "HCC-N", "HCC-T"),
    legend_position = "bottom"  # <--- Change legend position here
  )

  print(p)
}
}
